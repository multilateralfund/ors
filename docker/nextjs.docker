FROM node:18-alpine

WORKDIR /frontend
VOLUME ["/frontend/.next/"]

COPY frontend/package.json .
COPY frontend/package-lock.json .
RUN npm install

COPY frontend/ .
RUN npm run build
RUN cp /frontend/.next/BUILD_ID /frontend/.next/static/BUILD_ID

CMD ["npm", "run", "start"]